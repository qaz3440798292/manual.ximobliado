# 头像与材质预览图

::: tip

这一部分的 API 不需要经过用户登录和认证。

:::

## 根据角色名获取头像

通过这个 API，可以获取该角色所使用的皮肤对应的头像。

```
GET /avatar/player/{name}
```

其中 `{name}` 参数为角色名。

### 参数

| 名称   | 类型      | 描述                                                         |
| ------ | --------- | ------------------------------------------------------------ |
| `size` | `integer` | 头像大小。注意这不是最终生成的图片尺寸大小。                 |
| `3d`   | `any`     | 当此参数存在时，将生成一个类似有「3D」效果的头像，而不是头像的正面图。 |
| `png`  | `any`     | 当此参数存在时，将返回 PNG 格式图片；否则返回 WebP 格式。（但如果服务器的 GD 扩展不支持 WebP 则仍返回 PNG） |

### 响应

如果角色不存在，返回 404；如果材质不存在，返回 404；正常返回 200。

可通过响应头的 `Content-Type` 字段来判断图片格式。

## 根据用户 UID 获取头像

通过这个 API，可以获取该用户所设置的头像。

```
GET /avatar/user/{uid}
```

其中 `{uid}` 参数为用户 UID。

### 参数

| 名称   | 类型      | 描述                                                         |
| ------ | --------- | ------------------------------------------------------------ |
| `size` | `integer` | 头像大小。注意这不是最终生成的图片尺寸大小。                 |
| `3d`   | `any`     | 当此参数存在时，将生成一个类似有「3D」效果的头像，而不是头像的正面图。 |
| `png`  | `any`     | 当此参数存在时，将返回 PNG 格式图片；否则返回 WebP 格式。（但如果服务器的 GD 扩展不支持 WebP 则仍返回 PNG） |

### 响应

如果用户不存在，返回一个默认头像（HTTP 状态码为 200）；如果材质不存在，返回 404；正常返回 200。

可通过响应头的 `Content-Type` 字段来判断图片格式。

## 根据材质 TID 生成头像

通过这个 API，可以生成并返回该材质对应的头像图片。

```
GET /avatar/{tid}
```

其中 `{tid}` 参数为材质 TID。

### 参数

| 名称   | 类型      | 描述                                                         |
| ------ | --------- | ------------------------------------------------------------ |
| `size` | `integer` | 头像大小。注意这不是最终生成的图片尺寸大小。                 |
| `3d`   | `any`     | 当此参数存在时，将生成一个类似有「3D」效果的头像，而不是头像的正面图。 |
| `png`  | `any`     | 当此参数存在时，将返回 PNG 格式图片；否则返回 WebP 格式。（但如果服务器的 GD 扩展不支持 WebP 则仍返回 PNG） |

### 响应

如果材质不存在，返回 404；正常返回 200。

可通过响应头的 `Content-Type` 字段来判断图片格式。

## 根据材质文件 hash 生成头像

通过这个 API，可以生成并返回该材质对应的头像图片并且不需要事先知道材质的 TID。

```
GET /avatar/hash/{hash}
```

其中 `{hash}` 参数为材质文件的 hash 值。

### 参数

| 名称   | 类型      | 描述                                                         |
| ------ | --------- | ------------------------------------------------------------ |
| `size` | `integer` | 头像大小。注意这不是最终生成的图片尺寸大小。                 |
| `3d`   | `any`     | 当此参数存在时，将生成一个类似有「3D」效果的头像，而不是头像的正面图。 |
| `png`  | `any`     | 当此参数存在时，将返回 PNG 格式图片；否则返回 WebP 格式。（但如果服务器的 GD 扩展不支持 WebP 则仍返回 PNG） |

### 响应

如果材质不存在，返回 404；正常返回 200。

可通过响应头的 `Content-Type` 字段来判断图片格式。

## 根据材质 TID 生成材质预览图

生成并返回材质的正面和背面的预览图。

```
GET /preview/{tid}
```

其中 `{tid}` 参数为材质 TID。

### 参数

| 名称   | 类型      | 描述                                                         |
| ------ | --------- | ------------------------------------------------------------ |
| `png`  | `any`     | 当此参数存在时，将返回 PNG 格式图片；否则返回 WebP 格式。（但如果服务器的 GD 扩展不支持 WebP 则仍返回 PNG） |

### 响应

如果材质不存在，返回 404；正常返回 200。

可通过响应头的 `Content-Type` 字段来判断图片格式。

## 根据材质文件 hash 生成材质预览图

生成并返回材质的正面和背面的预览图，并且不需要事先知道材质的 TID。

```
GET /preview/hash/{hash}
```

其中 `{hash}` 参数为材质文件的 hash 值。

### 参数

| 名称  | 类型  | 描述                                                         |
| ----- | ----- | ------------------------------------------------------------ |
| `png` | `any` | 当此参数存在时，将返回 PNG 格式图片；否则返回 WebP 格式。（但如果服务器的 GD 扩展不支持 WebP 则仍返回 PNG） |

### 响应

如果材质不存在，返回 404；正常返回 200。

可通过响应头的 `Content-Type` 字段来判断图片格式。